{"version":3,"file":"index.es5.min.js","sources":["Adapter.js","StorageDecorator.js","serializer/Boolean.js","serializer/Number.js","serializer/JSON.js"],"sourcesContent":["import * as tslib_1 from \"tslib\";\nvar Adapter = /** @class */ (function () {\n    function Adapter(name, store) {\n        this.name = name;\n        this.store = store;\n        this.config = {\n            prefix: '',\n            postfix: '',\n            delimitier: ''\n        };\n        if (!store) {\n            throw new Error(\"Stroage not available in your environment\");\n        }\n    }\n    Adapter.prototype.configure = function (config) {\n        this.config = tslib_1.__assign({}, this.config, config);\n    };\n    Adapter.prototype.get = function (key, serializer) {\n        var value = this.store.getItem(this.generateAccessorKey(key));\n        if (value) {\n            if (serializer) {\n                return serializer.deserialize(value);\n            }\n            return value;\n        }\n        return undefined;\n    };\n    Adapter.prototype.set = function (key, value, serializer) {\n        var savableValue = '';\n        if (serializer && typeof value !== 'string') {\n            savableValue = serializer.serialize(value);\n        }\n        else {\n            savableValue = value;\n        }\n        this.store.setItem(this.generateAccessorKey(key), savableValue);\n    };\n    Adapter.prototype.remove = function (key) {\n        this.store.removeItem(key);\n    };\n    Adapter.prototype.clear = function () {\n        this.store.clear();\n    };\n    Adapter.prototype.toString = function () {\n        return \"Adapter { \" + this.name + \" }\";\n    };\n    Adapter.prototype.generateAccessorKey = function (key) {\n        return [\n            this.config.prefix,\n            key,\n            this.config.postfix\n        ].join(this.config.delimitier);\n    };\n    return Adapter;\n}());\nexport { Adapter };\nexport var localStorageAdapter = new Adapter('local', window.localStorage);\nexport var sessionStorageAdapter = new Adapter('session', window.sessionStorage);\n//# sourceMappingURL=Adapter.js.map","import { localStorageAdapter } from './Adapter';\nfunction createStorageBindings(_a) {\n    var target = _a.target, propertyKey = _a.propertyKey, _b = _a.storeKey, storeKey = _b === void 0 ? propertyKey : _b, _c = _a.storageAdapter, storageAdapter = _c === void 0 ? localStorageAdapter : _c, serializer = _a.serializer;\n    // TODO: should we use the component class name as prefix or sth?\n    // const componentKey = target.constructor.name;\n    Object.defineProperty(target, propertyKey, {\n        get: function () {\n            return storageAdapter.get(storeKey, serializer);\n        },\n        set: function (value) {\n            storageAdapter.set(storeKey, value, serializer);\n        }\n    });\n}\nexport function storage(targetOrStoreKey, propertyKeyOrSerializer, storageAdapter) {\n    // First case will be used if we have a custom attribute and a valid serializer (which is typeof Serializer)\n    if (typeof targetOrStoreKey === \"string\" && typeof propertyKeyOrSerializer !== \"string\") {\n        var storeKey_1 = targetOrStoreKey;\n        var serializer_1 = propertyKeyOrSerializer;\n        return function (target, propertyKey) {\n            target.__gondelStoragePlugin = true;\n            createStorageBindings({\n                target: target,\n                storageAdapter: storageAdapter,\n                storeKey: storeKey_1,\n                propertyKey: propertyKey,\n                serializer: serializer_1,\n            });\n        };\n    }\n    if (typeof targetOrStoreKey === \"string\" || typeof propertyKeyOrSerializer !== \"string\") {\n        // this case should not occur, the only case could be a respec of the decorators\n        throw new Error(\"Unexpected usage of @storage\");\n    }\n    var target = targetOrStoreKey;\n    var propertyKey = propertyKeyOrSerializer;\n    target.__gondelStoragePlugin = true;\n    // create simple bindings for @storage\n    createStorageBindings({\n        target: target,\n        propertyKey: propertyKey\n    });\n}\n//# sourceMappingURL=StorageDecorator.js.map","export var serialize = function (value) { return \"\" + value; };\nexport var deserialize = function (value) { return value === \"true\"; };\nexport default {\n    serialize: serialize,\n    deserialize: deserialize\n};\n//# sourceMappingURL=Boolean.js.map","export var serialize = function (value) { return \"\" + value; };\nexport var deserialize = function (value) { return parseFloat(value); };\nexport default {\n    serialize: serialize,\n    deserialize: deserialize\n};\n//# sourceMappingURL=Number.js.map","export var serialize = function (value) { return JSON.stringify(value, null, 0); };\nexport var deserialize = function (value) { return JSON.parse(value); };\nexport default {\n    serialize: serialize,\n    deserialize: deserialize\n};\n//# sourceMappingURL=JSON.js.map"],"names":["Adapter","name","store","this","config","prefix","postfix","delimitier","Error","prototype","configure","tslib_1.__assign","get","key","serializer","value","getItem","generateAccessorKey","deserialize","set","savableValue","serialize","setItem","remove","removeItem","clear","toString","join","localStorageAdapter","window","localStorage","sessionStorage","createStorageBindings","_a","target","propertyKey","_b","storeKey","_c","storageAdapter","Object","defineProperty","parseFloat","JSON","stringify","parse","targetOrStoreKey","propertyKeyOrSerializer","storeKey_1","serializer_1","__gondelStoragePlugin"],"mappings":"6OACIA,EAAyB,WACzB,SAASA,EAAQC,EAAMC,GAQnB,GAPAC,KAAKF,KAAOA,EACZE,KAAKD,MAAQA,EACbC,KAAKC,OAAS,CACVC,OAAQ,GACRC,QAAS,GACTC,WAAY,KAEXL,EACD,MAAM,IAAIM,MAAM,6CA0CxB,OAvCAR,EAAQS,UAAUC,UAAY,SAAUN,GACpCD,KAAKC,OAASO,WAAiB,GAAIR,KAAKC,OAAQA,IAEpDJ,EAAQS,UAAUG,IAAM,SAAUC,EAAKC,GACnC,IAAIC,EAAQZ,KAAKD,MAAMc,QAAQb,KAAKc,oBAAoBJ,IACxD,GAAIE,EACA,OAAID,EACOA,EAAWI,YAAYH,GAE3BA,GAIff,EAAQS,UAAUU,IAAM,SAAUN,EAAKE,EAAOD,GAC1C,IAAIM,EAAe,GAEfA,EADAN,GAA+B,iBAAVC,EACND,EAAWO,UAAUN,GAGrBA,EAEnBZ,KAAKD,MAAMoB,QAAQnB,KAAKc,oBAAoBJ,GAAMO,IAEtDpB,EAAQS,UAAUc,OAAS,SAAUV,GACjCV,KAAKD,MAAMsB,WAAWX,IAE1Bb,EAAQS,UAAUgB,MAAQ,WACtBtB,KAAKD,MAAMuB,SAEfzB,EAAQS,UAAUiB,SAAW,WACzB,MAAO,aAAevB,KAAKF,KAAO,MAEtCD,EAAQS,UAAUQ,oBAAsB,SAAUJ,GAC9C,MAAO,CACHV,KAAKC,OAAOC,OACZQ,EACAV,KAAKC,OAAOE,SACdqB,KAAKxB,KAAKC,OAAOG,aAEhBP,KAGA4B,EAAsB,IAAI5B,EAAQ,QAAS6B,OAAOC,cAC1B,IAAI9B,EAAQ,UAAW6B,OAAOE,gBCxDjE,SAASC,EAAsBC,GAC3B,IAAIC,EAASD,EAAGC,OAAQC,EAAcF,EAAGE,YAAaC,EAAKH,EAAGI,SAAUA,OAAkB,IAAPD,EAAgBD,EAAcC,EAAIE,EAAKL,EAAGM,eAAgBA,OAAwB,IAAPD,EAAgBV,EAAsBU,EAAIxB,EAAamB,EAAGnB,WAGxN0B,OAAOC,eAAeP,EAAQC,EAAa,CACvCvB,IAAK,WACD,OAAO2B,EAAe3B,IAAIyB,EAAUvB,IAExCK,IAAK,SAAUJ,GACXwB,EAAepB,IAAIkB,EAAUtB,EAAOD,MCVzC,MAEQ,CACXO,UAHmB,SAAUN,GAAS,MAAO,GAAKA,GAIlDG,YAHqB,SAAUH,GAAS,MAAiB,SAAVA,MCCpC,CACXM,UAHmB,SAAUN,GAAS,MAAO,GAAKA,GAIlDG,YAHqB,SAAUH,GAAS,OAAO2B,WAAW3B,OCC/C,CACXM,UAHmB,SAAUN,GAAS,OAAO4B,KAAKC,UAAU7B,EAAO,KAAM,IAIzEG,YAHqB,SAAUH,GAAS,OAAO4B,KAAKE,MAAM9B,2BHavD,SAAiB+B,EAAkBC,EAAyBR,GAE/D,GAAgC,iBAArBO,GAAoE,iBAA5BC,EAAsC,CACrF,IAAIC,EAAaF,EACbG,EAAeF,EACnB,OAAO,SAAUb,EAAQC,GACrBD,EAAOgB,uBAAwB,EAC/BlB,EAAsB,CAClBE,OAAQA,EACRK,eAAgBA,EAChBF,SAAUW,EACVb,YAAaA,EACbrB,WAAYmC,KAIxB,GAAgC,iBAArBH,GAAoE,iBAA5BC,EAE/C,MAAM,IAAIvC,MAAM,gCAEpB,IAAI0B,EAASY,EACTX,EAAcY,EAClBb,EAAOgB,uBAAwB,EAE/BlB,EAAsB,CAClBE,OAAQA,EACRC,YAAaA"}